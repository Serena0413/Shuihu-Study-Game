<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ°´æµ’ä¼ é—¯å…³å¤§å†’é™©</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:"Songti SC","SimSun","FangSong",serif;min-height:100vh;background:linear-gradient(160deg,#0d1f35 0%,#1a3a5c 50%,#0d1f35 100%);display:flex;flex-direction:column;align-items:center;padding:16px 14px 60px;}
.main-title{font-size:clamp(1.5rem,6vw,2.6rem);color:#d4a017;text-align:center;text-shadow:2px 2px 0 #8b1a1a,0 0 24px rgba(212,160,23,.5);letter-spacing:4px;margin-bottom:2px;}
.main-sub{color:#f5e6c8;text-align:center;font-size:.95rem;margin-bottom:14px;opacity:.85;}
#hud{width:100%;max-width:660px;display:none;align-items:center;gap:10px;background:rgba(0,0,0,.45);border:2px solid #d4a017;border-radius:40px;padding:8px 18px;margin-bottom:12px;}
#hud-score{color:#d4a017;font-size:1rem;white-space:nowrap;min-width:80px;}
.hud-track{flex:1;height:10px;background:rgba(255,255,255,.12);border-radius:10px;overflow:hidden;}
#hud-fill{height:100%;background:linear-gradient(90deg,#d4a017,#c0392b);border-radius:10px;transition:width .5s;}
#hud-qc{color:#f5e6c8;font-size:.85rem;white-space:nowrap;}
#hud-combo{color:#f8c060;font-size:.85rem;font-weight:bold;white-space:nowrap;min-width:60px;text-align:right;}
#title-badge{display:none;background:linear-gradient(135deg,#8b1a1a,#c0392b);border:2px solid #d4a017;border-radius:30px;padding:5px 18px;color:#ffd700;font-size:.9rem;letter-spacing:2px;margin-bottom:10px;text-align:center;animation:badgePop .4s ease;}
@keyframes badgePop{from{transform:scale(.6);opacity:0}to{transform:scale(1);opacity:1}}
.card{width:100%;max-width:660px;background:linear-gradient(145deg,#f5e6c8,#e8d5a3);border:3px solid #d4a017;border-radius:18px;padding:24px 22px;box-shadow:0 8px 40px rgba(0,0,0,.55);position:relative;}
.card::before{content:"";position:absolute;inset:8px;border:1px solid rgba(212,160,23,.25);border-radius:12px;pointer-events:none;}
#ss{text-align:center;}
#ss h2{font-size:1.5rem;color:#8b1a1a;margin-bottom:10px;}
#ss p{font-size:.95rem;line-height:1.8;color:#333;margin-bottom:10px;}
.big{font-size:3.8rem;display:block;margin:0 auto 10px;}
.chips{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin:10px 0;}
.chip{background:rgba(192,57,43,.1);border:1px solid #c0392b;border-radius:20px;padding:4px 12px;font-size:.85rem;color:#8b1a1a;}
.chapter-list{display:flex;flex-direction:column;gap:8px;margin:14px 0;text-align:left;}
.ch-item{background:rgba(255,255,255,.6);border:1px solid #c8a87a;border-radius:10px;padding:10px 14px;font-size:.88rem;color:#333;line-height:1.6;}
.ch-item strong{color:#8b1a1a;}
.btn-red{display:inline-block;width:100%;margin-top:14px;padding:13px 0;background:linear-gradient(135deg,#c0392b,#8b1a1a);border:none;border-radius:30px;font-family:inherit;font-size:1.15rem;color:#d4a017;cursor:pointer;letter-spacing:2px;box-shadow:0 4px 18px rgba(192,57,43,.4);transition:transform .2s;}
.btn-red:hover{transform:translateY(-2px);}
.btn-gold{display:block;width:100%;margin-top:12px;padding:12px 0;background:linear-gradient(135deg,#d4a017,#b8860b);border:none;border-radius:12px;font-family:inherit;font-size:1.05rem;color:white;cursor:pointer;letter-spacing:2px;transition:transform .2s;}
.btn-gold:hover{transform:translateY(-2px);}
#qs{padding-top:50px;}
.badge{position:absolute;top:-14px;left:20px;background:#c0392b;color:white;padding:3px 14px;border-radius:10px;font-size:.78rem;letter-spacing:1px;}
.htag{display:inline-flex;align-items:center;gap:6px;background:#c0392b;color:white;padding:4px 14px;border-radius:20px;font-size:.88rem;margin-bottom:12px;}
.qt{font-size:clamp(.98rem,2.6vw,1.12rem);line-height:1.9;color:#1a0a00;margin-bottom:16px;min-height:52px;}
.opts{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
.ob{background:white;border:2px solid #d4a017;border-radius:10px;padding:12px 8px;font-family:inherit;font-size:.92rem;color:#1a0a00;cursor:pointer;transition:background .18s,transform .15s;line-height:1.4;text-align:center;}
.ob:hover{background:#fff3c4;transform:translateY(-2px);}
.ob.cor{background:#2d6a4f!important;border-color:#2d6a4f!important;color:white!important;}
.ob.wrg{background:#c0392b!important;border-color:#c0392b!important;color:white!important;}
.fb{margin-top:12px;padding:11px 13px;border-radius:10px;font-size:.9rem;line-height:1.7;display:none;}
.fb.show{display:block;}
.fb.ok{background:rgba(45,106,79,.12);border:1px solid #2d6a4f;color:#1a4a2e;}
.fb.bad{background:rgba(192,57,43,.1);border:1px solid #c0392b;color:#7a1a0e;}
#overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:100;align-items:center;justify-content:center;}
#overlay.show{display:flex;}
#pop{background:linear-gradient(145deg,#f5e6c8,#e8d5a3);border:3px solid #d4a017;border-radius:20px;padding:30px 28px;max-width:360px;width:90%;text-align:center;animation:popIn .45s cubic-bezier(.34,1.56,.64,1);}
@keyframes popIn{from{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}
#pop .pop-icon{font-size:3.5rem;display:block;margin-bottom:10px;}
#pop h3{font-size:1.4rem;color:#8b1a1a;margin-bottom:6px;}
#pop .pop-reward{background:linear-gradient(135deg,#8b1a1a,#c0392b);color:#ffd700;border-radius:12px;padding:12px 16px;margin:12px 0;font-size:1rem;line-height:1.8;}
#pop .pop-title-label{font-size:.85rem;color:#666;margin-bottom:4px;}
#pop .pop-title-val{font-size:1.3rem;color:#8b1a1a;font-weight:bold;}
#pop p{font-size:.9rem;color:#555;line-height:1.7;margin-bottom:14px;}
#es{text-align:center;}
#es h2{font-size:1.45rem;color:#8b1a1a;margin-bottom:10px;}
.sbox{background:rgba(212,160,23,.1);border:2px solid #d4a017;border-radius:14px;padding:16px;margin:12px 0;}
.snum{font-size:2.6rem;color:#c0392b;font-weight:bold;}
.rnk{font-size:1.05rem;color:#2d6a4f;margin-top:4px;}
#emsg{font-size:.92rem;line-height:1.8;color:#333;margin:10px 0;}
.medals{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin:10px 0;}
.medal{background:rgba(212,160,23,.15);border:1px solid #d4a017;border-radius:20px;padding:5px 14px;font-size:.85rem;color:#8b1a1a;}
#wr{text-align:left;margin-top:12px;}
.wi{background:rgba(192,57,43,.07);border-radius:8px;padding:9px 11px;margin-bottom:6px;font-size:.85rem;line-height:1.6;color:#333;}
#combo-toast{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(135deg,#8b1a1a,#c0392b);color:#ffd700;font-size:1.6rem;font-weight:bold;padding:14px 32px;border-radius:50px;border:3px solid #d4a017;pointer-events:none;opacity:0;z-index:200;text-align:center;transition:opacity .2s;}
#combo-toast.show{opacity:1;}
@media(max-width:480px){.opts{grid-template-columns:1fr;}.card{padding:20px 14px;}}
</style>
</head>
<body>
<p class="main-title">âš”ï¸ æ°´æµ’ä¼  âš”ï¸</p>
<p class="main-sub">æ¢å±±é—¯å…³å¤§å†’é™© Â· äº”å¹´çº§å¿…è¯»æŒ‘æˆ˜</p>
<div id="title-badge">ğŸ• åˆå…¥æ±Ÿæ¹–</div>
<div id="hud">
  <span id="hud-score">â­ 0åˆ†</span>
  <div class="hud-track"><div id="hud-fill" style="width:0%"></div></div>
  <span id="hud-qc">1/25</span>
  <span id="hud-combo"></span>
</div>
<div class="card" id="ss">
  <span class="big">ğŸ¯</span>
  <h2>æ¢å±±å¥½æ±‰å¬å”¤ä»¤ï¼</h2>
  <p>ã€Šæ°´æµ’ä¼ ã€‹å…±108ä½å¥½æ±‰ï¼Œæ›¿å¤©è¡Œé“ï¼Œä¹‰è–„äº‘å¤©ã€‚é—¯è¿‡5å…³ï¼Œèµ¢å–æœ€é«˜å¤´è¡”ï¼</p>
  <div class="chips">
    <span class="chip">ğŸ¯ æ­¦æ¾æ‰“è™</span><span class="chip">âš¡ é²æ™ºæ·±</span>
    <span class="chip">ğŸŒŠ å®‹æ±Ÿ</span><span class="chip">ğŸª“ æé€µ</span>
    <span class="chip">ğŸ° æ¢å±±æ³Š</span><span class="chip">ğŸ¨€ å´ç”¨</span>
    <span class="chip">ğŸ©¹ èŠ±è£</span><span class="chip">ğŸ”¨ æ—å†²</span>
  </div>
  <div class="chapter-list">
    <div class="ch-item"><strong>ç¬¬ä¸€å…³ Â· è‹±é›„ç»°å·</strong> â€” 5é¢˜ï¼Œæ¯é¢˜10åˆ†ï¼Œå…¨å¯¹é¢å¤–å¥–åŠ±50åˆ†ï¼</div>
    <div class="ch-item"><strong>ç¬¬äºŒå…³ Â· ç»å…¸æƒ…èŠ‚</strong> â€” 5é¢˜ï¼Œåˆ†å€¼<strong style="color:#c0392b">Ã—2å€</strong>ï¼Œè¿‡å…³å†å¥–60åˆ†ï¼</div>
    <div class="ch-item"><strong>ç¬¬ä¸‰å…³ Â· äººç‰©å…³ç³»</strong> â€” 5é¢˜ï¼Œåˆ†å€¼<strong style="color:#c0392b">Ã—2å€</strong>ï¼Œ3è¿å‡»è§¦å‘å¥–åŠ±ï¼</div>
    <div class="ch-item"><strong>ç¬¬å››å…³ Â· æ¢å±±ç§˜é—»</strong> â€” 5é¢˜ï¼Œåˆ†å€¼<strong style="color:#c0392b">Ã—3å€</strong>ï¼Œè§£é”å†›å¸ˆç§°å·ï¼</div>
    <div class="ch-item"><strong>ç¬¬äº”å…³ Â· ç»ˆæè€ƒéªŒ</strong> â€” 5é¢˜ï¼Œæ¯é¢˜<strong style="color:#c0392b">20Ã—4å€</strong>ï¼Œå†²å‡»æœ€é«˜å¤´è¡”ï¼</div>
  </div>
  <p style="color:#8b1a1a;font-weight:bold">ğŸ”¥ è¿ç»­ç­”å¯¹è§¦å‘è¿å‡»åŠ æˆï¼Œå¾—åˆ†å¤§å¹…æå‡ï¼</p>
  <button class="btn-red" onclick="startGame()">å¼€å§‹é—¯å…³ ğŸš€</button>
</div>
<div class="card" id="qs" style="display:none">
  <div class="badge" id="bg">ç¬¬ä¸€å…³</div>
  <div class="htag"><span id="he"></span>&nbsp;<span id="hn"></span></div>
  <div class="qt" id="qt"></div>
  <div class="opts" id="opts"></div>
  <div class="fb" id="fb"></div>
  <button class="btn-gold" id="nb" style="display:none" onclick="nextQ()">ä¸‹ä¸€é¢˜ â†’</button>
</div>
<div class="card" id="es" style="display:none">
  <span class="big" id="ei">ğŸ†</span>
  <h2 id="et">é—¯å…³å®Œæˆï¼</h2>
  <div class="sbox"><div class="snum" id="fs">0åˆ†</div><div class="rnk" id="rn">åˆå‡ºèŒ…åº</div></div>
  <div class="medals" id="medals"></div>
  <p id="emsg"></p>
  <div id="wr"></div>
  <button class="btn-red" onclick="startGame()">å†æˆ˜ä¸€å±€ ğŸ”„</button>
</div>
<div id="overlay">
  <div id="pop">
    <span class="pop-icon" id="pop-icon">ğŸ‰</span>
    <h3 id="pop-ch-title">ç¬¬ä¸€å…³é€šè¿‡ï¼</h3>
    <div class="pop-reward" id="pop-reward">å¥–åŠ±</div>
    <div class="pop-title-label">æ–°å¤´è¡”è§£é”</div>
    <div class="pop-title-val" id="pop-title-val">æ±Ÿæ¹–æ¸¸ä¾ </div>
    <p id="pop-msg">ç»§ç»­åŠ æ²¹ï¼</p>
    <button class="btn-red" onclick="closePopAndContinue()">ç»§ç»­é—¯å…³ âš”ï¸</button>
  </div>
</div>
<div id="combo-toast">ğŸ”¥ è¿å‡»ï¼</div>
<script>
var CHAPTERS = [
  { name: 'ç¬¬ä¸€å…³Â·è‹±é›„ç»°å·', mult: 1, bonus: 50, qs: [
    { he:'ğŸ¯', hn:'æ­¦æ¾', q:'æ­¦æ¾åœ¨æ™¯é˜³å†ˆèµ¤æ‰‹ç©ºæ‹³æ‰“æ­»è€è™ï¼Œå¨éœ‡å¤©ä¸‹ã€‚ä»–çš„ç»°å·æ˜¯ä»€ä¹ˆï¼Ÿ', opts:['è¡Œè€…','è±¹å­å¤´','èŠ±å’Œå°š','é»‘æ—‹é£'], ans:0, exp:'æ­¦æ¾ç»°å·ã€è¡Œè€…ã€‘ï¼Œå› ä»–å¸¸ç©¿è¡Œè€…æ‰“æ‰®ã€‚æ™¯é˜³å†ˆæ‰“è™æ˜¯ã€Šæ°´æµ’ä¼ ã€‹æœ€ç»å…¸æƒ…èŠ‚ä¹‹ä¸€ï¼' },
    { he:'ğŸ”¨', hn:'æ—å†²', q:'æ—å†²åŸæ˜¯ä¸œäº¬å…«åä¸‡ç¦å†›æ•™å¤´ï¼Œå› å¥¸äººé™·å®³è¢«å‘é…æ²§å·ã€‚ä»–çš„ç»°å·æ˜¯ä»€ä¹ˆï¼Ÿ', opts:['ç‰éº’éºŸ','è±¹å­å¤´','åŠæ—¶é›¨','æ™ºå¤šæ˜Ÿ'], ans:1, exp:'æ—å†²ç»°å·ã€è±¹å­å¤´ã€‘ï¼Œå½¢å®¹ä»–å¨çŒ›å¦‚è±¹ã€‚è¢«é«˜ä¿…é™·å®³ï¼Œé›ªå¤œä¸Šæ¢å±±ï¼Œä»¤äººåŠ¨å®¹ï¼' },
    { he:'âš¡', hn:'é²æ™ºæ·±', q:'é²æ™ºæ·±åŠ›å¤§æ— æ¯”ï¼Œèƒ½æ‹”èµ·åº™å‰å‚æ¨æŸ³ï¼Œèº«ä¸Šåˆºæ»¡èŠ±ç»£ã€‚ä»–çš„ç»°å·æ˜¯ä»€ä¹ˆï¼Ÿ', opts:['èŠ±å’Œå°š','æ··æ±Ÿé¾™','ç¥è¡Œå¤ªä¿','éœ¹é›³ç«'], ans:0, exp:'é²æ™ºæ·±ç»°å·ã€èŠ±å’Œå°šã€‘ï¼Œå› èº«ä¸Šåˆºæ»¡èŠ±ç»£ã€‚ä¸‰æ‹³æ‰“æ­»é•‡å…³è¥¿ï¼Œä¾ è‚ä¹‰èƒ†ï¼' },
    { he:'ğŸŒŠ', hn:'å®‹æ±Ÿ', q:'å®‹æ±Ÿä»—ä¹‰ç–è´¢ã€å¹¿ç»“å¥½æ±‰ï¼Œæ˜¯æ¢å±±æ³Šé¦–é¢†ã€‚ä»–æœ€è‘—åçš„ç»°å·æ˜¯ä»€ä¹ˆï¼Ÿ', opts:['åŠæ—¶é›¨','å°æå¹¿','åŒé­å°†','èµ›è²‚è‰'], ans:0, exp:'å®‹æ±Ÿç»°å·ã€åŠæ—¶é›¨ã€‘ï¼Œå¸¸åœ¨åˆ«äººæœ€éœ€è¦æ—¶å‡ºæ‰‹ï¼Œå¦‚åŒä¹…æ—±åçš„ç”˜éœ–ï¼' },
    { he:'ğŸ¨€', hn:'å´ç”¨', q:'å´ç”¨è¶³æ™ºå¤šè°‹ï¼Œæ˜¯æ¢å±±çš„å†›å¸ˆï¼Œå¸¸è¢«ç§°ä¸ºèµ›è¯¸è‘›ã€‚ä»–çš„ç»°å·æ˜¯ä»€ä¹ˆï¼Ÿ', opts:['åŠæ—¶é›¨','æ™ºå¤šæ˜Ÿ','å…¥äº‘é¾™','ç¥æœºå†›å¸ˆ'], ans:1, exp:'å´ç”¨ç»°å·ã€æ™ºå¤šæ˜Ÿã€‘ï¼Œæ˜¯æ¢å±±æ ¸å¿ƒæ™ºå›Šï¼Œæ™ºå–ç”Ÿè¾°çº²å°±æ˜¯ä»–ç­–åˆ’çš„ï¼' }
  ]},
  { name: 'ç¬¬äºŒå…³Â·ç»å…¸æƒ…èŠ‚', mult: 2, bonus: 60, qs: [
    { he:'ğŸº', hn:'æ­¦æ¾', q:'æ­¦æ¾åœ¨æ™¯é˜³å†ˆå…±å–äº†å¤šå°‘ç¢—é…’æ‰ä¸Šå±±æ‰“è™ï¼Ÿé‚£å®¶é…’å«ä¸‰ç¢—ä¸è¿‡å†ˆã€‚', opts:['ä¸‰ç¢—','ä¹ç¢—','åå…«ç¢—','äºŒåå››ç¢—'], ans:2, exp:'æ­¦æ¾è¶³è¶³å–äº†ã€åå…«ç¢—ã€‘ï¼åº—å®¶ä¸€å†åŠé˜»ï¼Œä»–åä¸å¬ï¼Œç‹¬è‡ªä¸Šå±±ï¼Œå¾’æ‰‹æ‰“æ­»å¤§è€è™ï¼' },
    { he:'ğŸ”¥', hn:'æ—å†²', q:'æ—å†²è¢«å‘é…æ²§å·çœ‹å®ˆè‰æ–™åœºï¼Œæ˜¯è°æ”¾ç«çƒ§è‰æ–™åœºä¼å›¾å®³æ­»æ—å†²ï¼Ÿ', opts:['æ—å†²ä¸æ…å¤±ç«','é™†è°¦ç­‰å¥¸äººæ”¾ç«','é›·ç”µå¼•å‘','å†›å£«è¯¯æ“ä½œ'], ans:1, exp:'é«˜ä¿…æ´¾é™†è°¦ã€å¯Œå®‰æ”¾ç«ï¼Œæ—å†²å¹¸è¿é€ƒè„±ï¼Œé›ªå¤œæ‰‹åˆƒä»‡äººï¼Œèµ°ä¸Šæ¢å±±ä¹‹è·¯ï¼' },
    { he:'ğŸŒ²', hn:'é²æ™ºæ·±', q:'é²æ™ºæ·±æš—ä¸­è·Ÿéšè¢«æŠ¼é€çš„æ—å†²ï¼Œåœ¨å“ªé‡Œå‡ºæ‰‹ç›¸æ•‘æ‰“ç¿»äº†ä¸¤ä¸ªå·®å½¹ï¼Ÿ', opts:['æ²§å·ç å¤´','é‡çŒªæ—','äº”å°å±±ä¸‹','å¤§ååºœ'], ans:1, exp:'é²æ™ºæ·±åœ¨ã€é‡çŒªæ—ã€‘æ‰“ç¿»è‘£è¶…ã€è–›éœ¸ï¼Œæ•‘ä¸‹æ—å†²ï¼Œè¿™æ®µä¾ ä¹‰æƒ…è°Šä»¤äººæ„ŸåŠ¨ï¼' },
    { he:'ğŸ·', hn:'å®‹æ±Ÿ', q:'å®‹æ±Ÿåœ¨æµ”é˜³æ¥¼é¢˜å†™åè¯—è¢«åˆ¤æ­»åˆ‘ï¼ŒæŠ¼èµ´åˆ‘åœºæ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ', opts:['ä»–è¢«å¤„å†³äº†','æ¢å±±å¥½æ±‰åŠ«æ³•åœº','ä»–è¶Šç‹±é€ƒè·‘','æœå»·èµ¦å…äº†ä»–'], ans:1, exp:'æ¢å±±å¥½æ±‰åœ¨åˆ‘åœºã€åŠ«æ³•åœºã€‘ï¼Œæ•‘å‡ºå®‹æ±Ÿï¼æ­¤åå®‹æ±Ÿæ­£å¼å…¥ä¼™ï¼Œæˆä¸ºä¼—æœ›æ‰€å½’çš„å¤´é¢†ï¼' },
    { he:'âš¡', hn:'é²æ™ºæ·±', q:'é²æ™ºæ·±åœ¨ç›¸å›½å¯ºèœå›­å­é‡Œï¼Œå±•ç¤ºäº†å“ªä¸ªä»¤ä¼—æ³¼çš®å¿ƒæœå£æœçš„å£®ä¸¾ï¼Ÿ', opts:['æ‹³æ‰“å±±é—¨çŸ³æŸ±','è„šè¸¢æŠ¤é™¢å®¶ä¸','å€’æ‹”å‚æ¨æŸ³','ä¸¾èµ·ç™¾æ–¤çŸ³é”'], ans:2, exp:'é²æ™ºæ·±åœ¨ç›¸å›½å¯ºã€å€’æ‹”å‚æ¨æŸ³ã€‘ï¼Œå°†å¤§æŸ³æ ‘è¿æ ¹æ‹”èµ·ï¼Œä»æ­¤ä¼—æ³¼çš®æ— ä¸æ‹œæœï¼' }
  ]},
  { name: 'ç¬¬ä¸‰å…³Â·äººç‰©å…³ç³»', mult: 2, bonus: 70, qs: [
    { he:'ğŸ”¨', hn:'æ­¦æ¾', q:'æ­¦æ¾ä¸ºå…„æŠ¥ä»‡ï¼Œæ‰‹åˆƒäº†å“ªä¸¤ä¸ªäººï¼Ÿå“¥å“¥æ­¦å¤§éƒè¢«è¿™ä¸¤äººåˆè°‹æ¯’æ­»ã€‚', opts:['é«˜ä¿…å’Œè”¡äº¬','è¥¿é—¨åº†å’Œæ½˜é‡‘è²','é™†è°¦å’Œå¯Œå®‰','éƒ‘å± å’Œå¼ é’'], ans:1, exp:'æ­¦å¤§éƒè¢«ã€æ½˜é‡‘è²ä¸è¥¿é—¨åº†ã€‘åˆè°‹æ¯’æ­»ï¼Œæ­¦æ¾ä¸ºå…„æŠ¥ä»‡æ‰‹åˆƒäºŒäººï¼Œä¹‰è–„äº‘å¤©ï¼' },
    { he:'âš¡', hn:'é²æ™ºæ·±', q:'é²æ™ºæ·±æ‹³æ‰“é•‡å…³è¥¿ï¼Œæ˜¯ä¸ºäº†å¸®åŠ©è°è„±ç¦»è‹¦æµ·ï¼Ÿ', opts:['æ—å†²çš„å¦»å­','é‡‘ç¿ è²çˆ¶å¥³','å®‹æ±Ÿçš„å…„å¼Ÿ','æé€µçš„æ¯äº²'], ans:1, exp:'é²æ™ºæ·±å¬åˆ°ã€é‡‘ç¿ è²çˆ¶å¥³ã€‘å“­è¯‰è¢«éƒ‘å± æ¬ºå‹ï¼Œäºæ˜¯æŒºèº«ç›¸åŠ©ï¼Œä¸‰æ‹³æ‰“æ­»éƒ‘å± ï¼' },
    { he:'ğŸª“', hn:'æé€µ', q:'æé€µç»°å·é»‘æ—‹é£ï¼Œä½¿åŒæ¿æ–§ï¼Œå¯¹æ¢å±±å“ªä½å¤§å“¥æœ€å¿ å¿ƒè€¿è€¿ï¼Ÿ', opts:['æ™ç›–','å®‹æ±Ÿ','å´ç”¨','å¢ä¿Šä¹‰'], ans:1, exp:'æé€µå¯¹ã€å®‹æ±Ÿã€‘å¿ å¿ƒè€¿è€¿ï¼Œå‡¡å®‹æ±Ÿæœ‰éš¾ï¼Œä»–ç¬¬ä¸€ä¸ªå†²ä¸Šå»ï¼ŒåŠ›å¤§æ— æ¯”ï¼Œæ˜¯æ¢å±±çŒ›å°†ï¼' },
    { he:'ğŸ©¹', hn:'èŠ±è£', q:'èŠ±è£ç»°å·å°æå¹¿ï¼Œç®­æ³•ç™¾å‘ç™¾ä¸­ã€‚ä»–åŸæ¥æ‹…ä»»å“ªé‡Œçš„å®˜å‘˜ï¼Ÿ', opts:['é’å·çŸ¥åºœ','æ¸…é£å¯¨çŸ¥å¯¨','æ²§å·å…µé©¬éƒ½ç›‘','ä¸œå¹³åºœå°†å®˜'], ans:1, exp:'èŠ±è£æ˜¯ã€æ¸…é£å¯¨çŸ¥å¯¨ã€‘ï¼Œå› å®‹æ±Ÿè¢«é™·å®³ï¼Œä»–æ¯…ç„¶å¼ƒå®˜ä¸å®‹æ±Ÿä¸€åŒå¥”èµ´æ¢å±±ï¼' },
    { he:'ğŸŒŠ', hn:'æ™ç›–', q:'æ¢å±±æœ€åˆçš„é¦–é¢†æ™ç›–ï¼Œåœ¨å“ªæ¬¡æˆ˜å½¹ä¸­ä¸­æ¯’ç®­èº«äº¡ï¼Ÿ', opts:['æ”»æ‰“å¤§ååºœ','æ”»æ‰“æ›¾å¤´å¸‚','å¾è®¨æ–¹è…Š','ä¸‰æ‰“ç¥å®¶åº„'], ans:1, exp:'æ™ç›–åœ¨ã€æ”»æ‰“æ›¾å¤´å¸‚ã€‘æ—¶è¢«æ¯’ç®­å°„ä¸­ï¼Œä¸æ²»èº«äº¡ï¼Œæ­¤åå®‹æ±Ÿæˆä¸ºæ¢å±±æ–°å¤´é¢†ï¼' }
  ]},
  { name: 'ç¬¬å››å…³Â·æ¢å±±ç§˜é—»', mult: 3, bonus: 80, qs: [
    { he:'ğŸ°', hn:'æ¢å±±', q:'æ°´æµ’ä¼ ä¸­æ¢å±±æ³Šå…±èšé›†äº†å¤šå°‘ä½å¥½æ±‰ï¼Œå²ç§°ä¸€ç™¾å•å…«å°†ï¼Ÿ', opts:['36ä½','72ä½','108ä½','120ä½'], ans:2, exp:'æ¢å±±å…±æœ‰ã€108ä½ã€‘å¥½æ±‰ï¼Œ36ä½å¤©ç½¡æ˜Ÿå’Œ72ä½åœ°ç…æ˜Ÿï¼Œå…±åŒåœ¨æ¢å±±æ›¿å¤©è¡Œé“ï¼' },
    { he:'ğŸ¨€', hn:'å´ç”¨', q:'å´ç”¨ç­‰äººæ™ºå–ç”Ÿè¾°çº²ï¼Œä»–ä»¬ç”¨ä»€ä¹ˆæ–¹æ³•è¿·å€’äº†æ¨å¿—ä¸€è¡Œäººï¼Ÿ', opts:['åœ¨æ°´é‡Œä¸‹æ¯’','åœ¨ç™½é…’é‡Œä¸‹è’™æ±—è¯','å‡æ‰®å®˜å…µçªè¢­','åŠå¤œå·è¢­è¥åœ°'], ans:1, exp:'å´ç”¨ç­‰äººåœ¨ç™½é…’é‡Œä¸‹ã€è’™æ±—è¯ã€‘ï¼Œè¶æ¨å¿—ç­‰äººå–é…’åæ˜å€’ï¼ŒæˆåŠŸåŠ«èµ°ç”Ÿè¾°çº²ï¼' },
    { he:'ğŸ°', hn:'æ¢å±±', q:'æ¢å±±æ³Šæ——å¸œä¸Šå†™ç€å“ªå››ä¸ªå¤§å­—ï¼Œä»£è¡¨å¥½æ±‰ä»¬çš„è¡Œäº‹å®—æ—¨ï¼Ÿ', opts:['æ›¿å¤©è¡Œé“','åŠ«å¯Œæµè´«','æ€è´ªå®˜å','å¿ ä¹‰åƒç§‹'], ans:0, exp:'æ¢å±±æ——å¸œä¸Šå†™ç€ã€æ›¿å¤©è¡Œé“ã€‘ï¼Œæ„æ€æ˜¯ä»£æ›¿ä¸Šå¤©æƒ©æ¶æ‰¬å–„ï¼Œåå¯¹è´ªå®˜æ±¡åï¼' },
    { he:'ğŸš¢', hn:'é˜®æ°ä¸‰å…„å¼Ÿ', q:'é˜®å°äºŒã€é˜®å°äº”ã€é˜®å°ä¸ƒæ˜¯æ¸”æ°‘å‡ºèº«ï¼Œåœ¨æ¢å±±ä¸»è¦è´Ÿè´£å“ªæ–¹é¢ä½œæˆ˜ï¼Ÿ', opts:['éª‘å…µå†²é”‹','æ°´ä¸Šä½œæˆ˜','å±±åœ°ä¼å‡»','æƒ…æŠ¥åˆºæ¢'], ans:1, exp:'é˜®æ°ä¸‰å…„å¼Ÿæ°´æ€§æä½³ï¼Œæ˜¯æ¢å±±ã€æ°´å†›ã€‘æ ¸å¿ƒï¼Œåœ¨æ°´ä¸Šæˆ˜æ— ä¸èƒœï¼' },
    { he:'ğŸ°', hn:'æ¢å±±', q:'æ¢å±±è‹±é›„æ’åº§æ¬¡æ—¶ï¼Œè°åä¸Šäº†æ¢å±±ç¬¬ä¸€æŠŠäº¤æ¤…æˆä¸ºå¤§å¤´é¢†ï¼Ÿ', opts:['å¢ä¿Šä¹‰','å®‹æ±Ÿ','å´ç”¨','æ—å†²'], ans:1, exp:'ã€å®‹æ±Ÿã€‘æ’åœ¨æ¢å±±ç¬¬ä¸€ä½ï¼Œåä¸Šå¤´æŠŠäº¤æ¤…ï¼Œå¢ä¿Šä¹‰æ’ç¬¬äºŒï¼Œå´ç”¨æ’ç¬¬ä¸‰ï¼' }
  ]},
  { name: 'ç¬¬äº”å…³Â·ç»ˆæè€ƒéªŒ', mult: 4, bonus: 100, qs: [
    { he:'ğŸ“š', hn:'æ°´æµ’ä¼ ', q:'æ°´æµ’ä¼ æ˜¯æˆ‘å›½å››å¤§åè‘—ä¹‹ä¸€ï¼Œå®ƒçš„ä½œè€…æ˜¯è°ï¼Ÿ', opts:['ç½—è´¯ä¸­','æ–½è€åºµ','å´æ‰¿æ©','æ›¹é›ªèŠ¹'], ans:1, exp:'ã€Šæ°´æµ’ä¼ ã€‹ç”±å…ƒæœ«æ˜åˆçš„ã€æ–½è€åºµã€‘æ‰€è‘—ï¼Œæ˜¯ä¸­å›½å¤ä»£æœ€ä¼˜ç§€çš„é•¿ç¯‡å°è¯´ä¹‹ä¸€ï¼' },
    { he:'ğŸ”¨', hn:'æ—å†²', q:'æ—å†²è¢«è¿«ä¸Šæ¢å±±ä¹‹å‰ï¼Œåœ¨å“ªä¸ªåœ°æ–¹äº²æ‰‹æ€æ­»äº†é™†è°¦ç­‰ä»‡äººï¼Ÿ', opts:['é‡çŒªæ—','æ²§å·ç›‘ç‹±','å±±ç¥åº™','è‰æ–™åœºé—¨å£'], ans:2, exp:'æ—å†²åœ¨å¤§é›ªå¤œèº²è¿›ã€å±±ç¥åº™ã€‘é¿å¯’ï¼Œå¬åˆ°é™†è°¦ç­‰äººå¯†è°‹ï¼Œå¿æ— å¯å¿æ‰‹åˆƒä»‡äººï¼' },
    { he:'ğŸ¯', hn:'æ­¦æ¾', q:'æ­¦æ¾é†‰æ‰“è’‹é—¨ç¥ï¼Œæ˜¯å¸®è°å¤ºå›äº†å¿«æ´»æ—é…’åº—ï¼Ÿ', opts:['å®‹æ±Ÿ','æ–½æ©','æŸ´è¿›','ç‡•é’'], ans:1, exp:'æ­¦æ¾é†‰æ‰“è’‹é—¨ç¥æ˜¯ä¸ºäº†å¸®ã€æ–½æ©ã€‘å¤ºå›å¿«æ´»æ—ï¼Œä½¿å‡ºç‰ç¯æ­¥é¸³é¸¯è„šï¼Œä¸‰æ‹³ä¸¤è„šæ‰“å€’è’‹é—¨ç¥ï¼' },
    { he:'âš¡', hn:'é²æ™ºæ·±', q:'é²æ™ºæ·±æœ€åçš„ç»“å±€æ˜¯ä»€ä¹ˆï¼Ÿ', opts:['æˆ˜æ­»æ²™åœº','åœ¨æ­å·å…­å’Œå¯ºååŒ–åœ†å¯‚','å›åˆ°äº”å°å±±','è¢«æœå»·èµ¦å…å›ä¹¡'], ans:1, exp:'é²æ™ºæ·±åœ¨ã€æ­å·å…­å’Œå¯ºååŒ–åœ†å¯‚ã€‘ï¼Œåœ¨ä¸€å£°æ½®æ°´å£°ä¸­å¤§å½»å¤§æ‚Ÿï¼Œå¾—åˆ°å®Œæ»¡çš„å½’å®¿ï¼' },
    { he:'ğŸ“š', hn:'æ°´æµ’ä¼ ', q:'ä»¥ä¸‹å“ªéƒ¨ä½œå“ä¸æ°´æµ’ä¼ åŒå±äºä¸­å›½å››å¤§åè‘—ï¼Ÿ', opts:['å„’æ—å¤–å²','èŠæ–‹å¿—å¼‚','çº¢æ¥¼æ¢¦','å°ç¥æ¼”ä¹‰'], ans:2, exp:'å››å¤§åè‘—æ˜¯ã€Šæ°´æµ’ä¼ ã€‹ã€Šä¸‰å›½æ¼”ä¹‰ã€‹ã€Šè¥¿æ¸¸è®°ã€‹ã€ã€Šçº¢æ¥¼æ¢¦ã€‹ã€‘ï¼Œéƒ½æ˜¯ä¸­å›½å¤å…¸æ–‡å­¦çš„ç‘°å®ï¼' }
  ]}
];

var TITLES = [
  {min:0,   label:'åˆå…¥æ±Ÿæ¹–',   icon:'ğŸ•'},
  {min:80,  label:'æ±Ÿæ¹–å¥½æ±‰',   icon:'âš”ï¸'},
  {min:200, label:'æ¢å±±ä¹‰å£«',   icon:'ğŸ°'},
  {min:350, label:'æ›¿å¤©è¡Œé“',   icon:'ğŸš©'},
  {min:500, label:'åœ°ç…æ˜Ÿå°†',   icon:'â­'},
  {min:700, label:'å¤©ç½¡æ˜Ÿå°†',   icon:'â­â­'},
  {min:900, label:'æ¢å±±å¤§å¤´é¢†', icon:'ğŸ‘‘'}
];

var CHAPTER_REWARDS = [
  {icon:'ğŸ‰', titleUnlock:'æ±Ÿæ¹–å¥½æ±‰',   msg:'è‹±é›„ç»°å·å…¨é€šï¼ä½ å·²è®¤è¯†æ¢å±±æœ€å‡ºåçš„å¥½æ±‰ï¼Œä¸‹ä¸€å…³åˆ†å€¼ç¿»å€ï¼'},
  {icon:'ğŸ”¥', titleUnlock:'æ¢å±±ä¹‰å£«',   msg:'ç»å…¸æƒ…èŠ‚å…¨é€šï¼ä½ å¯¹æ°´æµ’æƒ…èŠ‚æŒæ¡å¾ˆå¥½ï¼Œç»§ç»­åŠ æ²¹ï¼'},
  {icon:'âš¡',   titleUnlock:'æ›¿å¤©è¡Œé“',   msg:'äººç‰©å…³ç³»å…¨é€šï¼è¿›å…¥ç¬¬å››å…³ï¼Œåˆ†å€¼å˜ä¸º3å€ï¼Œå…¨åŠ›å†²åˆºï¼'},
  {icon:'â­', titleUnlock:'åœ°ç…æ˜Ÿå°†',   msg:'ç§˜é—»å…¨é€šï¼æœ€ç»ˆå…³æ¯é¢˜é«˜è¾¾80åˆ†ï¼Œå†²åˆºæœ€é«˜å¤´è¡”ï¼'},
  {icon:'ğŸ‘‘', titleUnlock:'å¤©ç½¡æ˜Ÿå°†',   msg:'æ­å–œé€šå…³æ‰€æœ‰äº”å…³ï¼ä½ æ˜¯çœŸæ­£çš„æ°´æµ’ä¼ è¾¾äººï¼'}
];

var curChapter=0, curQ=0, score=0, combo=0, wrongs=[], done=false, earnedMedals=[], chapterScores=[0,0,0,0,0];

function getTotalQ(){var t=0;CHAPTERS.forEach(function(c){t+=c.qs.length;});return t;}
function getGlobalIdx(){var idx=0;for(var i=0;i<curChapter;i++)idx+=CHAPTERS[i].qs.length;return idx+curQ;}

function show(id){
  ['ss','qs','es'].forEach(function(i){document.getElementById(i).style.display='none';});
  document.getElementById(id).style.display='block';
}

function startGame(){
  curChapter=0;curQ=0;score=0;combo=0;wrongs=[];done=false;earnedMedals=[];chapterScores=[0,0,0,0,0];
  document.getElementById('hud').style.display='flex';
  document.getElementById('title-badge').style.display='block';
  updateHUD();show('qs');render();
}

function render(){
  done=false;
  var ch=CHAPTERS[curChapter], d=ch.qs[curQ];
  document.getElementById('bg').textContent=ch.name+(ch.mult>1?' x'+ch.mult+'å€':'');
  document.getElementById('he').innerHTML=d.he;
  document.getElementById('hn').textContent=d.hn;
  document.getElementById('qt').textContent=d.q;
  var o=document.getElementById('opts');
  o.innerHTML='';
  for(var i=0;i<d.opts.length;i++){
    var b=document.createElement('button');
    b.className='ob';
    b.textContent=d.opts[i];
    (function(idx,btn){btn.onclick=function(){pick(idx);};})(i,b);
    o.appendChild(b);
  }
  var f=document.getElementById('fb');
  f.className='fb';f.textContent='';
  document.getElementById('nb').style.display='none';
  updateHUD();
}

function pick(idx){
  if(done)return;
  done=true;
  var ch=CHAPTERS[curChapter], d=ch.qs[curQ];
  var base=(curChapter===4?20:10)*ch.mult;
  var btns=document.querySelectorAll('.ob');
  btns.forEach(function(b){b.onclick=null;b.style.cursor='default';});
  var f=document.getElementById('fb');
  if(idx===d.ans){
    btns[idx].classList.add('cor');
    combo++;
    var bonus=0;
    if(combo>=5){bonus=base;showComboToast('ğŸ”¥ äº”è¿å‡»ï¼é¢å¤–+'+base+'åˆ†');}
    else if(combo>=3){bonus=Math.floor(base/2);showComboToast('âš¡ ä¸‰è¿å‡»ï¼é¢å¤–+'+bonus+'åˆ†');}
    var pts=base+bonus;
    score+=pts;chapterScores[curChapter]+=pts;
    f.className='fb ok show';
    f.textContent='ç­”å¯¹äº†ï¼+'+pts+'åˆ†'+(bonus>0?' (å«è¿å‡»å¥–åŠ±)':'')+'  '+d.exp;
  } else {
    btns[idx].classList.add('wrg');btns[d.ans].classList.add('cor');
    combo=0;
    f.className='fb bad show';
    f.textContent='ç­”é”™äº†ï¼  '+d.exp;
    wrongs.push({q:d.q,a:d.opts[d.ans]});
  }
  document.getElementById('nb').style.display='block';
  var isLast=(curQ===ch.qs.length-1);
  var isFinal=(curChapter===CHAPTERS.length-1&&isLast);
  document.getElementById('nb').textContent=isFinal?'æŸ¥çœ‹æœ€ç»ˆç»“æœ ğŸ†':(isLast?'è¿›å…¥ä¸‹ä¸€å…³ âš”ï¸':'ä¸‹ä¸€é¢˜ â†’');
  updateHUD();
}

function nextQ(){
  var ch=CHAPTERS[curChapter];
  if(curQ===ch.qs.length-1){showChapterClear();}
  else{curQ++;render();}
}

function showChapterClear(){
  var ch=CHAPTERS[curChapter],r=CHAPTER_REWARDS[curChapter];
  var maxScore=ch.qs.length*(curChapter===4?20:10)*ch.mult;
  var isPerfect=(chapterScores[curChapter]>=maxScore);
  var bonusScore=isPerfect?ch.bonus:0;
  if(bonusScore>0)score+=bonusScore;
  document.getElementById('pop-icon').innerHTML=r.icon;
  document.getElementById('pop-ch-title').textContent=ch.name+' é€šå…³ï¼';
  document.getElementById('pop-reward').innerHTML='æœ¬å…³å¾—åˆ†ï¼š<strong>'+chapterScores[curChapter]+'åˆ†</strong>'+(bonusScore>0?'<br>â­ å…¨å¯¹å¥–åŠ±ï¼š+'+bonusScore+'åˆ†ï¼':'')+'<br>ç´¯è®¡æ€»åˆ†ï¼š<strong>'+score+'åˆ†</strong>';
  document.getElementById('pop-title-val').innerHTML=r.icon+' '+r.titleUnlock;
  document.getElementById('pop-msg').textContent=r.msg;
  earnedMedals.push(r.titleUnlock);
  document.getElementById('overlay').classList.add('show');
  updateHUD();
}

function closePopAndContinue(){
  document.getElementById('overlay').classList.remove('show');
  curChapter++;
  if(curChapter>=CHAPTERS.length){showEnd();}
  else{curQ=0;combo=0;render();}
}

function showComboToast(msg){
  var t=document.getElementById('combo-toast');
  t.innerHTML=msg;t.classList.add('show');
  setTimeout(function(){t.classList.remove('show');},1600);
}

function updateHUD(){
  var total=getTotalQ(),gi=getGlobalIdx();
  document.getElementById('hud-fill').style.width=(gi/total*100)+'%';
  document.getElementById('hud-score').textContent='â­ '+score+'åˆ†';
  document.getElementById('hud-qc').textContent=(gi+1)+'/'+total;
  document.getElementById('hud-combo').innerHTML=combo>=2?'ğŸ”¥x'+combo:'';
  var t=TITLES[0];
  for(var i=TITLES.length-1;i>=0;i--){if(score>=TITLES[i].min){t=TITLES[i];break;}}
  document.getElementById('title-badge').innerHTML=t.icon+' '+t.label;
}

function showEnd(){
  document.getElementById('hud').style.display='none';
  show('es');
  document.getElementById('fs').textContent=score+'åˆ†';
  var maxPossible=0;
  CHAPTERS.forEach(function(c,ci){maxPossible+=c.qs.length*(ci===4?20:10)*c.mult+c.bonus;});
  var pct=score/maxPossible;
  var icon,title,rank,msg;
  if(pct>=0.9){icon='ğŸ‘‘';title='æ¢å±±å°ç¥ï¼';rank='å¤©ç½¡æ˜Ÿè½¬ä¸–ï¼';msg='å¤ªå‰å®³äº†ï¼ä½ å¯¹æ°´æµ’ä¼ çš„äº†è§£æ— äººèƒ½åŠï¼Œå ªç§°æ¢å±±å¤§å¤´é¢†ï¼';}
  else if(pct>=0.75){icon='â­';title='å¥½æ±‰å¨åï¼';rank='åœ°ç…æ˜Ÿä¸Šæ¦œï¼';msg='å¹²å¾—æ¼‚äº®ï¼ä½ å¯¹æ°´æµ’æ•…äº‹æŒæ¡æ·±åšï¼Œå†å†²ä¸€æŠŠæ‹¿æ»¡åˆ†ï¼';}
  else if(pct>=0.55){icon='âš”ï¸';title='åˆéœ²é”‹èŠ’ï¼';rank='æ±Ÿæ¹–å¥½æ±‰';msg='æœ‰å®åŠ›ï¼å¤šè¯»è¯»åŸè‘—ï¼Œæ¯ä¸ªæ•…äº‹éƒ½ç²¾å½©æ— æ¯”ï¼';}
  else{icon='ğŸ“š';title='ç»§ç»­åŠ æ²¹ï¼';rank='åˆå‡ºèŒ…åº';msg='åˆ«ç°å¿ƒï¼æ°´æµ’ä¼ æ•…äº‹ç²¾å½©çº·å‘ˆï¼Œé‡è¯»ä¸€éå†æ¥æŒ‘æˆ˜ï¼Œä½ ä¸€å®šèƒ½è¿›æ­¥ï¼';}
  document.getElementById('ei').innerHTML=icon;
  document.getElementById('et').textContent=title;
  document.getElementById('rn').textContent=rank;
  document.getElementById('emsg').textContent=msg;
  var md=document.getElementById('medals');md.innerHTML='';
  earnedMedals.forEach(function(m){var s=document.createElement('span');s.className='medal';s.textContent='ğŸ '+m;md.appendChild(s);});
  var wr=document.getElementById('wr');wr.innerHTML='';
  if(wrongs.length>0){
    var h=document.createElement('p');h.style.cssText='color:#c0392b;font-weight:bold;margin-bottom:8px;font-size:.92rem;';h.textContent='é”™é¢˜å›é¡¾ï¼š';wr.appendChild(h);
    wrongs.forEach(function(w){var d=document.createElement('div');d.className='wi';d.innerHTML='â“ '+w.q+'<br>âœ“ æ­£ç¡®ç­”æ¡ˆï¼š<strong>'+w.a+'</strong>';wr.appendChild(d);});
  }
}
</script>
</body>
</html>
