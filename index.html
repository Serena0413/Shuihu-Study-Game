<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>水浒传闯关大冒险</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: "Songti SC", "SimSun", "FangSong", serif;
  min-height: 100vh;
  background: linear-gradient(160deg, #0d1f35 0%, #1a3a5c 50%, #0d1f35 100%);
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px 16px 40px;
}
h1 {
  font-size: clamp(1.6rem, 6vw, 2.8rem);
  color: #d4a017;
  text-align: center;
  text-shadow: 2px 2px 0 #8b1a1a, 0 0 20px rgba(212,160,23,0.5);
  letter-spacing: 4px;
  margin-bottom: 4px;
}
.subtitle {
  color: #f5e6c8;
  text-align: center;
  font-size: 1rem;
  margin-bottom: 16px;
  opacity: 0.85;
}
#pb-wrap {
  width: 100%;
  max-width: 640px;
  background: rgba(0,0,0,0.4);
  border: 2px solid #d4a017;
  border-radius: 30px;
  padding: 8px 16px;
  display: none;
  align-items: center;
  gap: 12px;
  margin-bottom: 14px;
}
#sc { color: #d4a017; font-size: 1.1rem; white-space: nowrap; }
.track { flex: 1; height: 10px; background: rgba(255,255,255,0.15); border-radius: 10px; overflow: hidden; }
#fill { height: 100%; background: linear-gradient(90deg, #d4a017, #c0392b); border-radius: 10px; transition: width 0.5s; }
#qc { color: #f5e6c8; font-size: 0.95rem; white-space: nowrap; }
.card {
  width: 100%;
  max-width: 640px;
  background: linear-gradient(145deg, #f5e6c8, #e8d5a3);
  border: 3px solid #d4a017;
  border-radius: 16px;
  padding: 24px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.5);
  position: relative;
}
.card::before {
  content: "";
  position: absolute;
  inset: 8px;
  border: 1px solid rgba(212,160,23,0.3);
  border-radius: 10px;
  pointer-events: none;
}
#ss { text-align: center; }
#ss h2 { font-size: 1.6rem; color: #8b1a1a; margin-bottom: 10px; }
#ss p { font-size: 1rem; line-height: 1.8; color: #333; margin-bottom: 12px; }
.chips { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin: 12px 0; }
.chip { background: rgba(192,57,43,0.1); border: 1px solid #c0392b; border-radius: 20px; padding: 4px 12px; font-size: 0.9rem; color: #8b1a1a; }
.big { font-size: 4rem; display: block; margin: 0 auto 12px; }
.btn-red {
  display: inline-block;
  margin-top: 16px;
  padding: 14px 40px;
  background: linear-gradient(135deg, #c0392b, #8b1a1a);
  border: none;
  border-radius: 30px;
  font-family: inherit;
  font-size: 1.2rem;
  color: #d4a017;
  cursor: pointer;
  letter-spacing: 2px;
  box-shadow: 0 4px 16px rgba(192,57,43,0.4);
  transition: transform 0.2s;
}
.btn-red:hover { transform: translateY(-2px); }
.badge {
  position: absolute;
  top: -14px; left: 20px;
  background: #c0392b;
  color: white;
  padding: 3px 14px;
  border-radius: 10px;
  font-size: 0.8rem;
}
.htag {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: #c0392b;
  color: white;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 0.9rem;
  margin-bottom: 12px;
}
.qt {
  font-size: clamp(1rem, 2.5vw, 1.15rem);
  line-height: 1.9;
  color: #1a0a00;
  margin-bottom: 18px;
  min-height: 56px;
}
.opts { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.ob {
  background: white;
  border: 2px solid #d4a017;
  border-radius: 10px;
  padding: 12px 10px;
  font-family: inherit;
  font-size: 0.95rem;
  color: #1a0a00;
  cursor: pointer;
  transition: background 0.2s, transform 0.15s;
  line-height: 1.4;
  text-align: center;
}
.ob:hover { background: #fff3c4; transform: translateY(-2px); }
.ob.cor { background: #2d6a4f; border-color: #2d6a4f; color: white; }
.ob.wrg { background: #c0392b; border-color: #c0392b; color: white; }
.fb {
  margin-top: 14px;
  padding: 12px 14px;
  border-radius: 10px;
  font-size: 0.95rem;
  line-height: 1.7;
  display: none;
}
.fb.show { display: block; }
.fb.ok { background: rgba(45,106,79,0.12); border: 1px solid #2d6a4f; color: #1a4a2e; }
.fb.bad { background: rgba(192,57,43,0.1); border: 1px solid #c0392b; color: #7a1a0e; }
.btn-next {
  display: none;
  width: 100%;
  margin-top: 12px;
  padding: 12px;
  background: linear-gradient(135deg, #d4a017, #b8860b);
  border: none;
  border-radius: 10px;
  font-family: inherit;
  font-size: 1.1rem;
  color: white;
  cursor: pointer;
  letter-spacing: 2px;
  transition: transform 0.2s;
}
.btn-next:hover { transform: translateY(-2px); }
.btn-next.show { display: block; }
#es { text-align: center; }
#es h2 { font-size: 1.5rem; color: #8b1a1a; margin-bottom: 10px; }
.sbox {
  background: rgba(212,160,23,0.1);
  border: 2px solid #d4a017;
  border-radius: 12px;
  padding: 16px;
  margin: 12px 0;
}
.snum { font-size: 2.8rem; color: #c0392b; }
.rnk { font-size: 1.1rem; color: #2d6a4f; margin-top: 4px; }
#emsg { font-size: 0.95rem; line-height: 1.8; color: #333; margin: 10px 0; }
#wr { text-align: left; margin-top: 12px; }
.wi {
  background: rgba(192,57,43,0.07);
  border-radius: 8px;
  padding: 8px 10px;
  margin-bottom: 6px;
  font-size: 0.88rem;
  line-height: 1.6;
  color: #333;
}
@media (max-width: 480px) {
  .opts { grid-template-columns: 1fr; }
  .card { padding: 20px 14px; }
}
</style>
</head>
<body>

<h1>&#9876;&#65039; 水浒传 &#9876;&#65039;</h1>
<p class="subtitle">梁山闯关大冒险 · 五年级必读挑战</p>

<div id="pb-wrap">
  <span id="sc">&#127942; 0分</span>
  <div class="track"><div id="fill" style="width:0%"></div></div>
  <span id="qc">第1题/共15题</span>
</div>

<div class="card" id="ss">
  <span class="big">&#127983;</span>
  <h2>梁山好汉召唤令！</h2>
  <p>《水浒传》讲述了108位好汉聚义梁山、替天行道的故事。<br>快来挑战，看看你对这部经典了解多少！</p>
  <div class="chips">
    <span class="chip">&#128047; 武松打虎</span>
    <span class="chip">&#9889; 鲁智深</span>
    <span class="chip">&#127828; 宋江</span>
    <span class="chip">&#128481;&#65039; 林冲</span>
    <span class="chip">&#127754; 梁山泊</span>
    <span class="chip">&#129683; 李逵</span>
  </div>
  <p>共 <strong>15道题</strong>，涵盖人物、情节、绰号，每题10分</p>
  <button class="btn-red" onclick="startGame()">开始闯关 &#128640;</button>
</div>

<div class="card" id="qs" style="display:none">
  <div class="badge" id="bg">第一关</div>
  <div class="htag"><span id="he">&#128047;</span>&nbsp;<span id="hn">武松</span></div>
  <div class="qt" id="qt"></div>
  <div class="opts" id="opts"></div>
  <div class="fb" id="fb"></div>
  <button class="btn-next" id="nb" onclick="nextQ()">下一题 &#8594;</button>
</div>

<div class="card" id="es" style="display:none">
  <span class="big" id="ei">&#127942;</span>
  <h2 id="et">闯关完成！</h2>
  <div class="sbox">
    <div class="snum" id="fs">0分</div>
    <div class="rnk" id="rn">初出茅庐</div>
  </div>
  <p id="emsg"></p>
  <div id="wr"></div>
  <button class="btn-red" onclick="startGame()">再战一局 &#128260;</button>
</div>

<script>
var DATA = [
  { stage:"第一关·英雄绰号", he:"&#128047;", hn:"武松",
    q:"武松在景阳冈赤手空拳打死老虎，威震天下。他的绰号是什么？",
    opts:["行者","豹子头","花和尚","黑旋风"], ans:0,
    exp:"武松绰号是【行者】，因他常穿行者打扮。景阳冈打虎是《水浒传》最经典的情节之一！" },

  { stage:"第一关·英雄绰号", he:"&#128481;&#65039;", hn:"林冲",
    q:"林冲原是东京八十万禁军教头，因奸人陷害被发配沧州。他的绰号是什么？",
    opts:["玉麒麟","豹子头","及时雨","智多星"], ans:1,
    exp:"林冲绰号【豹子头】，形容他威猛如豹。他被高俅陷害，雪夜上梁山，令人动容。" },

  { stage:"第一关·英雄绰号", he:"&#9889;", hn:"鲁智深",
    q:"鲁智深力大无比，能拔起庙前垂杨柳，身上刺满花绣。他的绰号是什么？",
    opts:["花和尚","混江龙","神行太保","霹雳火"], ans:0,
    exp:"鲁智深绰号【花和尚】，因身上刺满花绣。他三拳打死镇关西，救了金氏父女，是侠义好汉！" },

  { stage:"第一关·英雄绰号", he:"&#127754;", hn:"宋江",
    q:"宋江为人仗义疏财、广结好汉，是梁山泊的首领。他最著名的绰号是什么？",
    opts:["及时雨","小李广","双鞭将","赛貂蝉"], ans:0,
    exp:"宋江绰号【及时雨】，因他常在别人最需要帮助时出手，如同久旱后的甘霖。" },

  { stage:"第二关·经典情节", he:"&#127866;", hn:"武松",
    q:"武松在景阳冈共喝了多少碗酒才上山打虎？那家酒叫三碗不过冈。",
    opts:["三碗","九碗","十八碗","五碗"], ans:2,
    exp:"武松足足喝了【十八碗】烈酒！店家一再劝阻，他不听，独自上山，徒手打死了大老虎！" },

  { stage:"第二关·经典情节", he:"&#128293;", hn:"林冲",
    q:"林冲被发配到沧州看守草料场，有人放火烧草料场企图害死林冲。是谁放的火？",
    opts:["林冲不慎失火","陆谦等奸人放火","雷电引发","军士误操作"], ans:1,
    exp:"高俅派陆谦、富安放火，企图烧死林冲。林冲幸运逃脱，雪夜手刃仇人，走上梁山之路！" },

  { stage:"第二关·经典情节", he:"&#127794;", hn:"鲁智深",
    q:"鲁智深一路暗中跟随被押送的林冲，在哪里出手相救，打翻了两个差役？",
    opts:["沧州码头","野猪林","五台山下","大名府"], ans:1,
    exp:"鲁智深在【野猪林】打翻差役董超、薛霸，救下了危在旦夕的林冲，这段友情令人感动！" },

  { stage:"第二关·经典情节", he:"&#127863;", hn:"宋江",
    q:"宋江在浔阳楼题写反诗，被官府判处死刑，押赴刑场时发生了什么？",
    opts:["他被处决了","梁山好汉劫法场救他","他越狱逃跑","朝廷赦免了他"], ans:1,
    exp:"梁山好汉在刑场【劫法场】，救出了宋江！此后宋江正式上梁山，成为众望所归的头领。" },

  { stage:"第三关·人物关系", he:"&#128481;&#65039;", hn:"武松",
    q:"武松为兄报仇，手刃了哪两个人？他的哥哥武大郎被这两人合谋毒死。",
    opts:["高俅和蔡京","西门庆和潘金莲","陆谦和富安","郑屠和张青"], ans:1,
    exp:"武松的哥哥武大郎被潘金莲与西门庆合谋毒死，武松为兄报仇，手刃二人，义薄云天！" },

  { stage:"第三关·人物关系", he:"&#9889;", hn:"鲁智深",
    q:"鲁智深拳打镇关西，是为了帮助谁？",
    opts:["林冲的妻子","金翠莲父女","宋江的兄弟","李逵的母亲"], ans:1,
    exp:"鲁智深在酒楼听到金翠莲父女哭诉，得知被郑屠欺压，于是挺身相助，三拳打死郑屠！" },

  { stage:"第三关·人物关系", he:"&#129683;", hn:"李逵",
    q:"李逵绰号黑旋风，性格鲁莽，使双板斧，对梁山哪位大哥最是忠心耿耿？",
    opts:["晁盖","宋江","吴用","卢俊义"], ans:1,
    exp:"李逵对【宋江】忠心耿耿，凡宋江有难，他第一个冲上去。力大无比，是梁山著名猛将！" },

  { stage:"第四关·梁山泊", he:"&#127984;", hn:"梁山",
    q:"《水浒传》中，梁山泊共聚集了多少位好汉，史称一百单八将？",
    opts:["36位","72位","108位","120位"], ans:2,
    exp:"梁山共有【108位】好汉，其中36位天罡星、72位地煞星，共同在梁山泊替天行道！" },

  { stage:"第四关·梁山泊", he:"&#129504;", hn:"吴用",
    q:"智多星吴用是梁山军师，常被称为赛诸葛。他参与策划了智取什么？",
    opts:["智取大名府","智取生辰纲","智取祝家庄","智取东京"], ans:1,
    exp:"吴用联合晁盖等人在黄泥冈【智取生辰纲】，劫了梁中书送给蔡京的金银财宝，揭开梁山故事序幕！" },

  { stage:"第四关·梁山泊", he:"&#128674;", hn:"阮氏三兄弟",
    q:"阮小二、阮小五、阮小七是渔民出身，在梁山主要负责哪方面作战？",
    opts:["骑兵冲锋","水上作战","山地伏击","情报刺探"], ans:1,
    exp:"阮氏三兄弟水性极佳，是梁山【水军】的核心。他们在水上战无不胜，为梁山立下赫赫战功！" },

  { stage:"第五关·主题精神", he:"&#9878;&#65039;", hn:"梁山精神",
    q:"梁山好汉的旗帜上写着替天行道四个大字。以下哪个说法最符合它的含义？",
    opts:["代替上天惩贪官、伸张正义","推翻皇帝建立新朝","只求自己快活","占山为王对抗一切"], ans:0,
    exp:"【替天行道】意思是代替上天惩恶扬善、伸张正义。梁山好汉反抗的是贪官污吏，而非普通百姓！" }
];

var cur=0, score=0, wrongs=[], done=false;

function show(id) {
  ["ss","qs","es"].forEach(function(i){ document.getElementById(i).style.display="none"; });
  document.getElementById(id).style.display="block";
}

function startGame() {
  cur=0; score=0; wrongs=[]; done=false;
  document.getElementById("pb-wrap").style.display="flex";
  show("qs");
  render();
}

function render() {
  done=false;
  var d=DATA[cur];
  document.getElementById("bg").textContent=d.stage;
  document.getElementById("he").innerHTML=d.he;
  document.getElementById("hn").textContent=d.hn;
  document.getElementById("qt").textContent=d.q;

  var o=document.getElementById("opts");
  o.innerHTML="";
  for(var i=0;i<d.opts.length;i++){
    var b=document.createElement("button");
    b.className="ob";
    b.textContent=d.opts[i];
    b.setAttribute("data-i",i);
    (function(idx,btn){
      btn.onclick=function(){ pick(idx); };
    })(i,b);
    o.appendChild(b);
  }

  var f=document.getElementById("fb");
  f.className="fb"; f.textContent="";
  var nb=document.getElementById("nb");
  nb.className="btn-next";
  nb.textContent = cur===DATA.length-1 ? "查看结果" : "下一题";
  updateBar();
}

function pick(idx) {
  if(done) return;
  done=true;
  var d=DATA[cur];
  var btns=document.querySelectorAll(".ob");
  btns.forEach(function(b){ b.onclick=null; b.style.cursor="default"; });

  var f=document.getElementById("fb");
  if(idx===d.ans){
    btns[idx].classList.add("cor");
    score+=10;
    f.className="fb ok show";
    f.textContent="答对了！"+d.exp;
  } else {
    btns[idx].classList.add("wrg");
    btns[d.ans].classList.add("cor");
    f.className="fb bad show";
    f.textContent="答错了！"+d.exp;
    wrongs.push({q:d.q, a:d.opts[d.ans]});
  }
  document.getElementById("nb").className="btn-next show";
  updateBar();
}

function nextQ() {
  cur++;
  if(cur>=DATA.length){ showEnd(); } else { render(); }
}

function updateBar() {
  var pct=(cur/DATA.length)*100;
  document.getElementById("fill").style.width=pct+"%";
  document.getElementById("sc").textContent="得分: "+score;
  document.getElementById("qc").textContent="第"+(cur+1)+"题/共"+DATA.length+"题";
}

function showEnd() {
  document.getElementById("pb-wrap").style.display="none";
  show("es");
  document.getElementById("fs").textContent=score+"分";
  var pct=score/(DATA.length*10);
  var icon,title,rank,msg;
  if(pct>=0.93){
    icon=""; title="闯关大成功！"; rank="天罡星转世！";
    msg="太厉害了！你对《水浒传》的了解堪比梁山军师吴用，真是智多星再世！";
  } else if(pct>=0.73){
    icon=""; title="好汉水准！"; rank="地煞星上榜！";
    msg="干得不错！你对水浒故事已经很熟悉了。再多读读原著，一定能成为水浒达人！";
  } else if(pct>=0.53){
    icon=""; title="初入江湖！"; rank="初出茅庐好少年";
    msg="有进步空间！建议多读经典章节，比如武松打虎、鲁智深倒拔垂杨柳，下次一定更棒！";
  } else {
    icon=""; title="继续加油！"; rank="要多读书哦～";
    msg="别灰心！《水浒传》故事非常精彩，重点关注每位好汉的绰号和经典故事再来挑战！";
  }
  document.getElementById("ei").textContent=icon;
  document.getElementById("et").textContent=title;
  document.getElementById("rn").textContent=rank;
  document.getElementById("emsg").textContent=msg;
  var wr=document.getElementById("wr");
  wr.innerHTML="";
  if(wrongs.length>0){
    var h=document.createElement("p");
    h.style.cssText="color:#c0392b;font-weight:bold;margin-bottom:8px;";
    h.textContent="错题回顾：";
    wr.appendChild(h);
    wrongs.forEach(function(w){
      var d=document.createElement("div");
      d.className="wi";
      d.innerHTML="? "+w.q+"<br>正确答案：<strong>"+w.a+"</strong>";
      wr.appendChild(d);
    });
  }
}
</script>
</body>
</html>
